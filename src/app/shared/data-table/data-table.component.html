<div class="grid xl:px-8 md:px-6 px-2">
  <div class="col-12">
    <h1 class="xl:my-4 mt-4 mb-0">Publicaciones</h1>
  </div>
  <div class="xl:col-3 col-12">
    <p-iconField iconPosition="left" class="ml-auto">
      <p-inputIcon>
        <i class="pi pi-search"></i>
      </p-inputIcon>
      <input
        pInputText
        type="text"
        class="w-full"
        (input)="dt2.filterGlobal(filtroEvento($event), 'contains')"
        placeholder="Buscar Publicaciones"
      />
    </p-iconField>
  </div>
  @if(currentUserIsAdmin) {
  <div class="xl:col-2 xl:col-offset-7 col-12">
    <button
      pButton
      pRipple
      label="Nueva Publicación"
      icon="pi pi-plus"
      class="w-full"
    ></button>
  </div>
  }
  <div class="card col-12">
    <p-table
      #dt2
      [value]="posts"
      styleClass="p-datatable-striped"
      [tableStyle]="{ 'min-width': '50rem' }"
      [paginator]="true"
      [rows]="5"
      [rowsPerPageOptions]="[5, 10, 20]"
      [globalFilterFields]="['body', 'title', 'user.email']"
    >
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="title" style="width: 20%">
            Título <p-sortIcon field="title" />
          </th>
          <th pSortableColumn="body" style="width: 70%">
            Contenido <p-sortIcon field="body" />
          </th>
          <th pSortableColumn="user.email" style="width: 10%">
            Creado por <p-sortIcon field="user.email" />
          </th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-post>
        <tr>
          <td>{{ post.title }}</td>
          <td>{{ post.body }}</td>
          <td>{{ post.user.email }}</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="5">No se encontraron publicaciones.</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
